
	
üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ—Å—Å–∞–º–∏ (–∑–∞–º–µ–Ω–∞ HEATD)
–¶–µ–ª—å: –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π DOS-–ø—Ä–æ–≥—Ä–∞–º–º—ã HEATD.exe –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é, –º–æ–¥—É–ª—å–Ω—É—é, 
–∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞ Python —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å DCON –∏ COM-–ø–æ—Ä—Ç–æ–º. 

üóÇÔ∏è –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

‚îÇ
‚îú‚îÄ‚îÄ main.py                 # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (CLI)
‚îú‚îÄ‚îÄ diagnose.py             # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ simulator.py            # –°–∏–º—É–ª—è—Ç–æ—Ä DCON-—É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îú‚îÄ‚îÄ programs/               # –ü—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –ø—Ä–µ—Å—Å–æ–≤ (JSON)
‚îÇ   ‚îú‚îÄ‚îÄ press1.json
‚îÇ   ‚îú‚îÄ‚îÄ press2.json
‚îÇ   ‚îî‚îÄ‚îÄ press3.json
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ system.json         # –†–µ–∂–∏–º, COM-–ø–æ—Ä—Ç, —Ç–∞–π–º–∏–Ω–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ hardware_config.json # –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π –ø–æ –ø—Ä–µ—Å—Å–∞–º
‚îÇ   ‚îî‚îÄ‚îÄ config.json         # –î–æ–ø. –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, dcon_devices
‚îú‚îÄ‚îÄ core/                   # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ program_manager.py  # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º
‚îÇ   ‚îú‚îÄ‚îÄ press_controller.py # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Å—Å–æ–º (–≤ –ø–æ—Ç–æ–∫–µ)
‚îÇ   ‚îú‚îÄ‚îÄ step_executor.py    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ temp_control.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–µ–≤–æ–º (on/off)
‚îÇ   ‚îú‚îÄ‚îÄ safety_monitor.py   # –ö–æ–Ω—Ç—Ä–æ–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ hardware_interface.py # –†–∞–±–æ—Ç–∞ —Å DCON (—Ä–µ–∞–ª—å–Ω—ã–π/—Å–∏–º—É–ª—è—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ global_state.py     # –ï–¥–∏–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (–≤ –ø–∞–º—è—Ç–∏)
‚îÇ   ‚îî‚îÄ‚îÄ hardware_daemon.py  # –î–µ–º–æ–Ω: —á–∏—Ç–∞–µ—Ç/–ø–∏—à–µ—Ç –∂–µ–ª–µ–∑–æ, –æ–±–Ω–æ–≤–ª—è–µ—Ç –±—É—Ñ–µ—Ä
‚îú‚îÄ‚îÄ state.json              # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∞–Ω–∞–ª–æ–≥ trouble.bin)
‚îú‚îÄ‚îÄ data/                   # –ê—Ä—Ö–∏–≤—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (CSV)
‚îÇ   ‚îú‚îÄ‚îÄ data0.csv
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ app.log                 # –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ build.bat               # –°–±–æ—Ä–∫–∞ –≤ .exe (pyinstaller)
‚îî‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: pyserial –∏ –¥—Ä.


üß± –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

1. main.py ‚Äî –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
    - –ó–∞–ø—É—Å–∫–∞–µ—Ç HardwareInterface –∏ HardwareDaemon.
    - –£–ø—Ä–∞–≤–ª—è–µ—Ç PressController —á–µ—Ä–µ–∑ CLI.
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã: start, stop, status, programs.
    - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ (atexit).
    - –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏–ª–∏ —Å–∏–º—É–ª—è—Ü–∏–∏.

2. diagnose.py ‚Äî –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    - –°–∫–∞–Ω–∏—Ä—É–µ—Ç —Å–µ—Ç—å DCON ($xxM).
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑—å, AI, DI/DO.
    - –û–±–Ω–æ–≤–ª—è–µ—Ç config.json ‚Üí dcon_devices.
    - –í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π.
    - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è.

3. simulator.py ‚Äî –°–∏–º—É–ª—è—Ç–æ—Ä DCON
    - –≠–º—É–ª–∏—Ä—É–µ—Ç I-7017, I-7018, I-7045, I-7051.
    - –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã: #xx, @xx, $xxM.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å com0com –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –∂–µ–ª–µ–∑–∞.
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–º–æ–¥–µ–ª—å + —à—É–º".

4. core/hardware_interface.py
    - –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è DCON.
    - –†–µ–∂–∏–º—ã: real (COM) / simulation.
    - –ú–µ—Ç–æ–¥—ã: read_temperature(), read_digital(), write_do().
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏.
    - –ù–µ —á–∏—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç global_state.

5. core/press_controller.py
    - –ü–æ—Ç–æ–∫–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–∏–º –ø—Ä–µ—Å—Å–æ–º.
    - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É —á–µ—Ä–µ–∑ ProgramManager.
    - –ó–∞–ø—É—Å–∫–∞–µ—Ç StepExecutor –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
    - –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ SafetyMonitor.
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—É–∑—É, –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –æ—Å—Ç–∞–Ω–æ–≤.

6. core/step_executor.py
    - –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç —à–∞–≥–∏ –∏–∑ pressX.json:
        - heat: –Ω–∞–≥—Ä–µ–≤ –¥–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
        - hold: –≤—ã–¥–µ—Ä–∂–∫–∞.
        - cool: –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ.
        - pause: –ø–∞—É–∑–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏.
    - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å TempControl.
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç SafetyMonitor –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ.

7. core/temp_control.py
    - –ú–Ω–æ–≥–æ–∑–æ–Ω–Ω—ã–π on/off –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å–æ–º.
    - –£–ø—Ä–∞–≤–ª—è–µ—Ç 8 –∑–æ–Ω–∞–º–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.
    - –ß–∏—Ç–∞–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏–∑ global_state.
    - –£–ø—Ä–∞–≤–ª—è–µ—Ç DO —á–µ—Ä–µ–∑ write_do_bit (—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º).
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É —É—Å—Ç–∞–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∑–æ–Ω.

8. core/safety_monitor.py
    - –ü—Ä–æ–≤–µ—Ä–∫–∞:
        - –ê–≤–∞—Ä–∏–π–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (E-Stop).
        - –û–±—Ä—ã–≤ —Ç–µ—Ä–º–æ–ø–∞—Ä—ã.
        - –ü–µ—Ä–µ–≥—Ä–µ–≤.
        - –ö–æ–Ω—Ü–µ–≤—ã–µ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏ (–¥–≤–µ—Ä—å, –ø—Ä–µ—Å—Å).
    - –ß–∏—Ç–∞–µ—Ç DI –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –∏–∑ global_state.
    - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–µ—Å—Å –ø—Ä–∏ –∞–≤–∞—Ä–∏–∏.
    - –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç HardwareInterface.

9. core/program_manager.py
    - –ó–∞–≥—Ä—É–∂–∞–µ—Ç pressX.json –∏–∑ –ø–∞–ø–∫–∏ programs/.
    - –ö—ç—à–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –ø–∞–º—è—Ç–∏.
    - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π, —Ç–∏–ø—ã).
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É/–≤—ã–±–æ—Ä.

10. core/global_state.py
    - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –±—É—Ñ–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤ –ø–∞–º—è—Ç–∏).
    - –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π (RLock).
    - –•—Ä–∞–Ω–∏—Ç: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, DI, DO, —Å—Ç–∞—Ç—É—Å—ã.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –º–æ–¥—É–ª—è–º–∏ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∂–µ–ª–µ–∑—É.

11. core/hardware_daemon.py
    - –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ (Thread), —á–∏—Ç–∞—é—â–∏–π –∏ –ø–∏—à—É—â–∏–π –∂–µ–ª–µ–∑–æ.
    - –ß–∏—Ç–∞–µ—Ç AI (—Ä–∞–∑ –≤ 2 —Å–µ–∫) –∏ DI (–∫–∞–∂–¥—ã–µ 100 –º—Å).
    - –ü–∏—à–µ—Ç DO —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º: —Å—Ä–æ—á–Ω—ã–µ –≤—ã—Ö–æ–¥—ã (–ª–∞–º–ø—ã, –∫–ª–∞–ø–∞–Ω—ã) ‚Äî —Å—Ä–∞–∑—É, –Ω–∞–≥—Ä–µ–≤ ‚Äî —Ä–µ–∂–µ.
    - –û–±–Ω–æ–≤–ª—è–µ—Ç global_state.
    - –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å COM-–ø–æ—Ä—Ç–æ–º –Ω–∞–ø—Ä—è–º—É—é.

‚öôÔ∏è –†–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã

–ó–∞–ø—É—Å–∫:
1. main.py —á–∏—Ç–∞–µ—Ç config/system.json.
2. –°–æ–∑–¥–∞—ë—Ç HardwareInterface (real/simulation).
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç HardwareDaemon (—Ñ–æ–Ω–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å).
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç CLI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Å—Å–æ–º:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "start 1"
2. PressController(1) ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç programs/press1.json —á–µ—Ä–µ–∑ ProgramManager.
3. StepExecutor –≤—ã–ø–æ–ª–Ω—è–µ—Ç —à–∞–≥–∏, –∏—Å–ø–æ–ª—å–∑—É—è TempControl –∏ SafetyMonitor.
4. SafetyMonitor –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª (–∏–∑ global_state).
5. TempControl —É–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–≥—Ä–µ–≤–æ–º (—á–µ—Ä–µ–∑ write_do_bit ‚Üí –≤ –æ—á–µ—Ä–µ–¥—å).
6. HardwareDaemon –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –Ω–∞ DO.
7. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ state.json (–Ω–∞ —Å–ª—É—á–∞–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏).

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏—è:
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è ‚Äî –≤ app.log.
- –ü—Ä–æ—Ü–µ—Å—Å—ã ‚Äî –≤ data/dataX.csv (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, —Å—Ç–∞—Ç—É—Å—ã).
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Äî –≤ diagnose.py.

–°–±–æ—Ä–∫–∞:
- build.bat ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç main.exe –∏ diagnose.exe —á–µ—Ä–µ–∑ pyinstaller.

	


	
	